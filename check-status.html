<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Check Job Status - RightClick</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f6f9;margin:0}
.container{max-width:450px;margin:30px auto;background:#fff;padding:20px;border-radius:10px;text-align:center}
.logo img{width:120px}
input,button{width:100%;padding:10px;margin:10px 0}
button{background:#007bff;color:white;border:none;border-radius:5px}
.result{margin-top:15px;font-size:15px}
</style>
</head>

<body>
<div class="container">
<div class="logo"><img src="logo.png"></div>
<h3>Check Your Job Status</h3>

<input type="text" id="jobId" placeholder="Enter Job ID">
<button onclick="checkStatus()">Check</button>

<div class="result" id="result"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, collection, getDocs } 
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyB8uRXxvOyZeCUzPEt-pUytXj_R8N_JLww",
 authDomain: "rightclick-service-center.firebaseapp.com",
 projectId: "rightclick-service-center",
 storageBucket: "rightclick-service-center.firebasestorage.app",
 messagingSenderId: "558210394752",
 appId: "1:558210394752:web:a3f8663d7c6dc8cc88d465"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.checkStatus = async()=>{
 const id=document.getElementById("jobId").value.trim();
 const res=document.getElementById("result");
 res.innerHTML="Searching...";
 const snap=await getDocs(collection(db,"jobs"));
 let found=false;

 snap.forEach(d=>{
  const j=d.data();
  if(j.jobId===id){
    found=true;
    res.innerHTML=`
    <b>Customer:</b> ${j.customerName}<br>
    <b>Status:</b> ${j.status}<br>
    <b>Item:</b> ${j.item}<br>
    <b>Accessories:</b> ${j.accessories}<br>
    <b>Updated:</b> ${j.timestamp}
    `;
  }
 });

 if(!found){
   res.innerHTML="‚ùå Job ID not found. Please check again.";
 }
};
</script>
</body>
</html>
